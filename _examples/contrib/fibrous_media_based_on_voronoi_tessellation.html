
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Fibrous Media with Voronoi Tessellations &#8212; OpenPNM 2.8.2.dev111140 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/js/custom.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    <img src="../../_static/openpnm_logo.jpg" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/openpnm_logo.jpg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../basic_usage.html">
  Basic Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../modules/index.html">
  Module Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../examples/index_old.html">
  Examples (old)
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/PMEAL/OpenPNM/issues">Issue Tracker<i class="fas fa-external-link-alt"></i></a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/PMEAL/OpenPNM/discussions">Get Help<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/PMEAL/OpenPNM" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/OpenPNM" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#generating-a-fibrous-media-network-using-voronoifibers-from-the-materials-module">
   Generating a Fibrous Media Network using VoronoiFibers from the Materials Module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting Started
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#background">
   Background
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#materials-module">
   Materials Module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-network-and-geometry">
   Setting up Network and Geometry
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-on-boundary-pores">
     A Note on Boundary Pores
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-note-on-performance">
     A Note on Performance
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section class="tex2jax_ignore mathjax_ignore" id="fibrous-media-with-voronoi-tessellations">
<h1>Fibrous Media with Voronoi Tessellations<a class="headerlink" href="#fibrous-media-with-voronoi-tessellations" title="Permalink to this heading">#</a></h1>
<section id="generating-a-fibrous-media-network-using-voronoifibers-from-the-materials-module">
<h2>Generating a Fibrous Media Network using VoronoiFibers from the Materials Module<a class="headerlink" href="#generating-a-fibrous-media-network-using-voronoifibers-from-the-materials-module" title="Permalink to this heading">#</a></h2>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<p>In this tutorial, we will demonstrate concepts of random pore network modelling outlined in <a class="reference external" href="http://jes.ecsdl.org/cgi/doi/10.1149/2.009308jes">J.T. Gostick’s 2013 paper</a> and subsequently used in some of our other papers investigating fuel cell gas diffusion layer compression <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/fuce.201500168">Tranter et. al 2016</a> and capillary hysteresis <a class="reference external" href="http://link.springer.com/10.1007/s11242-017-0973-2">Tranter et. al 2017</a>.</p>
</section>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this heading">#</a></h2>
<p>Pores are randomly dispersed inside the domain and connections are defined by the nearest neighbour Delaunay triangulation algorithm. The <a class="reference external" href="https://en.wikipedia.org/wiki/Voronoi_diagram">Voronoi diagram</a> is the compliment to the <a class="reference external" href="https://en.wikipedia.org/wiki/Delaunay_triangulation">Delaunay triangulation</a> and is used to replicate the fibres in a porous domain such as a fuel cell GDL. Each pore is surrounded by a cage of fibres which are created from the intersections of the equidistant planes between neighbouring pores. Where the planes intersect, a Voronoi vertex is created. A throat is defined by a set of vertices which are shared by two neighbouring pores. The throat vertices will be coplanar and the throat normal is the vector from one pore’s coordinate to the other. N.B this coordinate is not the pore centroid but can be close if the shape of the cage is near spherical. The vertices are used by the Voronoi geometry model which creates a 3D image of the fibres using a supplied fibre radius. Image analysis is then performed to extract pore and throat sizes by using the convex hull of the pore and throat vertices.</p>
</section>
<section id="materials-module">
<h2>Materials Module<a class="headerlink" href="#materials-module" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">materials</span></code> module was added to OpenPNM in V2.  It solves the problem that often the network topology and the geometry are coupled.  For instance, a sandstone might have an average pore size of 20 um, and they should be spaced apart 100 um.  The pore sizes are dictated by the Geometry class and the spacing is controlled by the Network class.  Thus, in order to get an accurate network model, users must define these both correctly.  The aim of the Materials module was to create a network and geometry at the same time to remove this possible confusion.  Classes in the Materials module actually return a Project object, which contains <em>both</em> the network and the geometry, with all properties predefined as needed.  The Voronoi fibers class does this as well.</p>
</section>
<section id="setting-up-network-and-geometry">
<h2>Setting up Network and Geometry<a class="headerlink" href="#setting-up-network-and-geometry" title="Permalink to this heading">#</a></h2>
<p>We first import the OpenPNM code, including a utility submodule which has useful functions for working with the <code class="docutils literal notranslate"><span class="pre">Voronoi</span></code> classes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">openpnm</span> <span class="k">as</span> <span class="nn">op</span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_formats = [&#39;svg&#39;]
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next we instantiate the <code class="docutils literal notranslate"><span class="pre">VoronoiFibers</span></code> classsfrom the <strong>Materials</strong> module, with a few parameters: <code class="docutils literal notranslate"><span class="pre">points</span></code> defines the number of pores in the bulk network but some may be removed if the <code class="docutils literal notranslate"><span class="pre">fiber_rad</span></code> (radius of the fibers in meters) parameter is large compared with the throat diameters as this will lead to occluded throats and possibly isolated pores. The <code class="docutils literal notranslate"><span class="pre">resolution</span></code> parameter sets the size of the voxels in meters used in image generation from which many of the geometry properties derive. The <code class="docutils literal notranslate"><span class="pre">shape</span></code> parameter sets the size of the bounding box at which the boundary edges are located and this is positioned with lowest point at the origin. Finally the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter is used to subsequently prefix the name of the additional <strong>Geometry</strong> objects that are created in the process.</p>
<p>In this example we set the random seed in the scipy package to make sure that random points are repeatedly generated with the same values for illustration. This is not necessary, otherwise.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scale</span> <span class="o">=</span> <span class="mf">1e-4</span>
<span class="n">wrk</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">Workspace</span><span class="p">()</span>
<span class="n">wrk</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;loglevel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">wrk</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">proj</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">VoronoiFibers</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                  <span class="n">fiber_rad</span><span class="o">=</span><span class="mf">5e-6</span><span class="p">,</span>
                                  <span class="n">resolution</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span>
                                  <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">],</span>
                                  <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">Input In [2],</span> in <span class="ni">&lt;cell line: 6&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">wrk</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">proj</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">VoronoiFibers</span><span class="p">(</span><span class="n">points</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>                                   <span class="n">fiber_rad</span><span class="o">=</span><span class="mf">5e-6</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>                                   <span class="n">resolution</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>                                   <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">],</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span>                                   <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>

<span class="ne">AttributeError</span>: module &#39;openpnm&#39; has no attribute &#39;materials&#39;
</pre></div>
</div>
</div>
</div>
<p>We are returned a handle to the project, which we can see contains three objects.  The network, and two geometries, one for the delaunay pores and one for the voronoi network.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">proj</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
 Object Name     Object ID                                                        
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
 test_net        &lt;openpnm.network.DelaunayVoronoiDual object at 0x7f61b1a005e0&gt;   
 test_del        &lt;openpnm.materials.VoronoiFibers object at 0x7f61b1607ea0&gt;       
 test_vor        &lt;openpnm.materials.VoronoiFibers object at 0x7f61b0f1d6d0&gt;       
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
</pre></div>
</div>
</div>
</div>
<p>To get access to the geometry objects we must invoke the project object and retrieve them separately</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span> <span class="o">=</span> <span class="n">proj</span><span class="p">[</span><span class="s1">&#39;test_net&#39;</span><span class="p">]</span>
<span class="n">del_geom</span> <span class="o">=</span> <span class="n">proj</span><span class="p">[</span><span class="s1">&#39;test_del&#39;</span><span class="p">]</span>
<span class="n">vor_geom</span> <span class="o">=</span> <span class="n">proj</span><span class="p">[</span><span class="s1">&#39;test_vor&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>As you can see we have more than one geometry. This is because the <code class="docutils literal notranslate"><span class="pre">VoronoiFibers</span></code> class has used the <code class="docutils literal notranslate"><span class="pre">DelaunayVoronoiDual</span></code> class (covered in another example) which contains pores and throats for the void space in-between fibers assigned to <code class="docutils literal notranslate"><span class="pre">del_geom</span></code> and also pores and throats for the fibers themselves which can be used for coupled simulations such as heat transfer assigned to <code class="docutils literal notranslate"><span class="pre">vor_geom</span></code>. We can at this point delete the pores and throats associated with fibers without impacting the traditional pore network as they are separate and connected by the <strong>interconnect</strong> throats.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openpnm</span> <span class="kn">import</span> <span class="n">topotools</span> <span class="k">as</span> <span class="n">tt</span>
<span class="n">tt</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">net</span><span class="p">,</span> <span class="n">pores</span><span class="o">=</span><span class="n">net</span><span class="o">.</span><span class="n">pores</span><span class="p">(</span><span class="s1">&#39;voronoi&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
openpnm.network.DelaunayVoronoiDual : test_net
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
#     Properties                                    Valid Values
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
1     pore.coords                                     226 / 226  
2     throat.conns                                    371 / 371  
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
#     Labels                                        Assigned Locations
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
1     pore.all                                      226       
2     pore.back                                     22        
3     pore.bottom                                   25        
4     pore.boundary                                 126       
5     pore.delaunay                                 226       
6     pore.front                                    19        
7     pore.internal                                 100       
8     pore.left                                     18        
9     pore.right                                    23        
10    pore.surface                                  80        
11    pore.test_del                                 226       
12    pore.test_vor                                 0         
13    pore.top                                      19        
14    pore.voronoi                                  0         
15    throat.all                                    371       
16    throat.boundary                               0         
17    throat.delaunay                               371       
18    throat.interconnect                           0         
19    throat.internal                               271       
20    throat.surface                                100       
21    throat.test_del                               371       
22    throat.test_vor                               0         
23    throat.voronoi                                0         
――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――
</pre></div>
</div>
</div>
</div>
<p>Note that trimming the <strong>voronoi</strong> pores has also trimmed the <strong>interconnect</strong> and <strong>voronoi</strong> throats as one or both of the pores that the throats connect have been removed, respectively.</p>
<p>We can now inspect the material visually using some functions on the network object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">del_geom</span><span class="o">.</span><span class="n">plot_pore</span><span class="p">(</span><span class="n">pores</span><span class="o">=</span><span class="n">del_geom</span><span class="o">.</span><span class="n">pores</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/anaconda/Code/OpenPNM/openpnm/materials/VoronoiFibers.py:991: MatplotlibDeprecationWarning: Calling gca() with keyword arguments was deprecated in Matplotlib 3.4. Starting two minor releases later, gca() will take no keyword arguments. The gca() function should only be used to get the current axes, or if no axes exist, create new axes with default keyword arguments. To create a new axes with non-default arguments, use plt.axes() or plt.subplot().
  ax = fig.gca(projection=&quot;3d&quot;)
</pre></div>
</div>
<img alt="../../_images/78bfd1bed6671ee9803698869ad901d12d75bbec1954a692042b3cfae825f21a.svg" src="../../_images/78bfd1bed6671ee9803698869ad901d12d75bbec1954a692042b3cfae825f21a.svg" /><img alt="../../_images/877a251ae3679f9a06a30fb5278d9f99a9a95e6d387a19e250ec9ed8e42dd144.svg" src="../../_images/877a251ae3679f9a06a30fb5278d9f99a9a95e6d387a19e250ec9ed8e42dd144.svg" /></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">del_geom</span><span class="o">.</span><span class="n">plot_throat</span><span class="p">(</span><span class="n">throats</span><span class="o">=</span><span class="n">del_geom</span><span class="o">.</span><span class="n">throats</span><span class="p">()[:</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/872913dd470f48521590b812c86077f1d2b16c99fef08037192c52065b819670.svg" src="../../_images/872913dd470f48521590b812c86077f1d2b16c99fef08037192c52065b819670.svg" /><img alt="../../_images/75d1fb0c3eb7acb727c92c082d68d5a6591710e6d01fa2f143811ad0185e9a2a.svg" src="../../_images/75d1fb0c3eb7acb727c92c082d68d5a6591710e6d01fa2f143811ad0185e9a2a.svg" /></div>
</div>
<blockquote>
<div></div></blockquote>
<section id="a-note-on-boundary-pores">
<h3>A Note on Boundary Pores<a class="headerlink" href="#a-note-on-boundary-pores" title="Permalink to this heading">#</a></h3>
<p>It is worth mentioning a little about the boundaries at this point. Behind the scenes all the pores in the network were temporarily reflected about the planes confining the pore space during the Delaunay tessellation. This has the effect of creating throats on the outer confines that are aligned with the boundary planes. The boundary pores are labelled <code class="docutils literal notranslate"><span class="pre">'surface'</span></code> and can be further identified by the shared coordinate which will either be zero or the values of the domain shape used to initialize the class. As is custom, with openpnm simulations the fictitious boundary pores are assigned zero volume. The pore-size-distribution can be plotted but will be skewed by including the boundary pores:</p>
</section>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">del_geom</span><span class="o">.</span><span class="n">show_hist</span><span class="p">(</span><span class="n">props</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pore.diameter&#39;</span><span class="p">],</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ticklabel_format</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;sci&quot;</span><span class="p">,</span> <span class="n">scilimits</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 432x288 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../../_images/cd76100a6b338f90e8a49112712e7c297ce7e635108a90272484d55ab6e57d76.svg" src="../../_images/cd76100a6b338f90e8a49112712e7c297ce7e635108a90272484d55ab6e57d76.svg" /></div>
</div>
<p>However, the throats connecting the boundary pores to their neigbors have real non-zero dimensions so the throat-size-distribution looks realistic</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">del_geom</span><span class="o">.</span><span class="n">show_hist</span><span class="p">(</span><span class="n">props</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;throat.diameter&#39;</span><span class="p">],</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ticklabel_format</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;sci&quot;</span><span class="p">,</span> <span class="n">scilimits</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 432x288 with 0 Axes&gt;
</pre></div>
</div>
<img alt="../../_images/d2bbc747f33d4578da12920f819dda7129226ab50708f428826d25739cb7f5d4.svg" src="../../_images/d2bbc747f33d4578da12920f819dda7129226ab50708f428826d25739cb7f5d4.svg" /></div>
</div>
<blockquote>
<div></div></blockquote>
<section id="a-note-on-performance">
<h3>A Note on Performance<a class="headerlink" href="#a-note-on-performance" title="Permalink to this heading">#</a></h3>
<p>In previous versions of openpnm (1.x) the Voronoi geometry could be generated with the option to use image analysis pore calculations of the pore sizes and other properties, or functions based on using idealized shapes formed from the Voronoi vertices could also be used which is faster but less accurate, especially when dealing with highly anisotropic media. The materials class does not give this option.
Generating the voxel image is a memory intensive process relying on many image analysis routines and it is recommended that a smaller network is tested first on your machine whilst monitoring your system performance to gauge whether larger networks are possible.</p>
</section>
<p>The image based approach allows for closer inspection of realistic fibrous structures and a few useful functions are provided for analysis and inspection.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">del_geom</span><span class="o">.</span><span class="n">plot_porosity_profile</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4f7eeb52051528a6f9776ead8cf60515757b130bcf8beeb332eee898ef7e5d59.svg" src="../../_images/4f7eeb52051528a6f9776ead8cf60515757b130bcf8beeb332eee898ef7e5d59.svg" /></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">del_geom</span><span class="o">.</span><span class="n">plot_fiber_slice</span><span class="p">(</span><span class="n">plane</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/b6d07c04c35bd2698d96fa058cbfcfaedcc1ac7cda51a45fd2e10baa65e34a65.svg" src="../../_images/b6d07c04c35bd2698d96fa058cbfcfaedcc1ac7cda51a45fd2e10baa65e34a65.svg" /></div>
</div>
<p>Two images are actually stored as private attributes on the delaunay geometry object: <code class="docutils literal notranslate"><span class="pre">_fiber_image</span></code> and <code class="docutils literal notranslate"><span class="pre">_hull_image</span></code>. The fiber image is a binary image with 1 representing the fiber and 0 the void space. The hull image represents the convex hulls surrounding each pore and is labelled with the original pore index (which may change after trimming). These images can be exported as tiff stacks and visualized in paraview, as well as being used to populate liquid filled porous networks. An example of such an image is shown below and is taken from <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/fuce.201500168">Tranter et. al 2016</a></p>
<img alt="https://imgur.com/whiKAVG.png" class="align-left" src="https://imgur.com/whiKAVG.png" />
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, PMEAL.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>