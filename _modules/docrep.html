
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>docrep &#8212; OpenPNM 2.8.2.dev111144 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/custom.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/openpnm_logo.jpg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/openpnm_logo.jpg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class=" collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../basic_usage.html">
  Basic Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../modules/index.html">
  Module Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../_examples/index.html">
  Examples
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/PMEAL/OpenPNM/issues">Issue Tracker<i class="fas fa-external-link-alt"></i></a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://github.com/PMEAL/OpenPNM/discussions">Get Help<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/PMEAL/OpenPNM" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <h1>Source code for docrep</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;The documentation repetition module.</span>

<span class="sd">Disclaimer</span>
<span class="sd">----------</span>
<span class="sd">Copyright 2021 Philipp S. Sommer, Helmholtz-Zentrum Geesthacht</span>

<span class="sd">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="sd">you may not use this file except in compliance with the License.</span>
<span class="sd">You may obtain a copy of the License at</span>

<span class="sd">    http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="sd">Unless required by applicable law or agreed to in writing, software</span>
<span class="sd">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="sd">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="sd">See the License for the specific language governing permissions and</span>
<span class="sd">limitations under the License.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span>

<span class="kn">from</span> <span class="nn">docrep.decorators</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">updates_docstring</span><span class="p">,</span> <span class="n">reads_docstring</span><span class="p">,</span> <span class="n">deprecated</span><span class="p">)</span>


<span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.3.2&#39;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Philipp Sommer&#39;</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;safe_modulo&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_params&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_types&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_kwargs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keep_params&quot;</span><span class="p">,</span>
    <span class="s2">&quot;keep_types&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DocstringProcessor&quot;</span><span class="p">,</span>
<span class="p">]</span>


<span class="n">substitution_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;(?s)(?&lt;!%)(%%)*%(?!%)   # uneven number of %</span>
<span class="sd">        \((?P&lt;key&gt;.*?)\)# key enclosed in brackets&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>


<span class="n">summary_patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?s).*?(?=(\n\s*\n)|$)&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_StrWithIndentation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A convenience class that indents the given string if requested through</span>
<span class="sd">    the __str__ method&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indent</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="n">indent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_s</span> <span class="o">=</span> <span class="n">s</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indent</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_s</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indent</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_s</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()))</span>


<span class="k">def</span> <span class="nf">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">checked</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">print_warning</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Safe version of the modulo operation (%) of strings</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        string to apply the modulo operation with</span>
<span class="sd">    meta: dict or tuple</span>
<span class="sd">        meta informations to insert (usually via ``s % meta``)</span>
<span class="sd">    checked: {&#39;KEY&#39;, &#39;VALUE&#39;}, optional</span>
<span class="sd">        Security parameter for the recursive structure of this function. It can</span>
<span class="sd">        be set to &#39;VALUE&#39; if an error shall be raised when facing a TypeError</span>
<span class="sd">        or ValueError or to &#39;KEY&#39; if an error shall be raised when facing a</span>
<span class="sd">        KeyError. This parameter is mainly for internal processes.</span>
<span class="sd">    print_warning: bool</span>
<span class="sd">        If True and a key is not existent in `s`, a warning is raised</span>
<span class="sd">    stacklevel: int</span>
<span class="sd">        The stacklevel for the :func:`warnings.warn` function</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    The effects are demonstrated by this example::</span>

<span class="sd">        &gt;&gt;&gt; from docrep import safe_modulo</span>
<span class="sd">        &gt;&gt;&gt; s = &quot;That&#39;s %(one)s string %(with)s missing &#39;with&#39; and %s key&quot;</span>
<span class="sd">        &gt;&gt;&gt; s % {&#39;one&#39;: 1}          # raises KeyError because of missing &#39;with&#39;</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">          File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="sd">        KeyError: &#39;with&#39;</span>
<span class="sd">        &gt;&gt;&gt; s % {&#39;one&#39;: 1, &#39;with&#39;: 2}        # raises TypeError because of &#39;%s&#39;</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">          File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="sd">        TypeError: not enough arguments for format string</span>
<span class="sd">        &gt;&gt;&gt; safe_modulo(s, {&#39;one&#39;: 1})</span>
<span class="sd">        &quot;That&#39;s 1 string %(with)s missing &#39;with&#39; and %s key&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span> <span class="o">%</span> <span class="n">meta</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
        <span class="c1"># replace the missing fields by %%</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">substitution_pattern</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">print_warning</span><span class="p">:</span>
                    <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> is not a valid key!&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">,</span> <span class="ne">SyntaxWarning</span><span class="p">,</span>
                         <span class="n">stacklevel</span><span class="p">)</span>
                <span class="n">full</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">full</span><span class="p">,</span> <span class="s1">&#39;%&#39;</span> <span class="o">+</span> <span class="n">full</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;KEY&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">checked</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">checked</span><span class="o">=</span><span class="n">checked</span> <span class="o">+</span> <span class="s1">&#39;KEY&#39;</span><span class="p">,</span>
                               <span class="n">print_warning</span><span class="o">=</span><span class="n">print_warning</span><span class="p">,</span>
                               <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meta</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;VALUE&#39;</span> <span class="ow">in</span> <span class="n">checked</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&quot;&quot;(?&lt;!%)(</span><span class="si">%%</span><span class="s2">)*%(?!%) # uneven number of %</span>
<span class="s2">                    \s*(\w|$)         # format strings&quot;&quot;&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;%\g&lt;0&gt;&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span>
                   <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">checked</span><span class="o">=</span><span class="n">checked</span> <span class="o">+</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span>
                           <span class="n">print_warning</span><span class="o">=</span><span class="n">print_warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">delete_params</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the given parameters from a string.</span>

<span class="sd">    Same as :meth:`delete_params` but does not use the :attr:`params`</span>
<span class="sd">    dictionary</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        The string of the parameters section</span>
<span class="sd">    params: list of str</span>
<span class="sd">        The names of the parameters to delete</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The modified string `s` without the descriptions of `params`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">patt</span> <span class="o">=</span> <span class="s1">&#39;(?s)&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;(?&lt;=\n)&#39;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\s*:.+?\n(?=\S+|$)&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">patt</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">delete_types</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the given types from a string.</span>

<span class="sd">    Same as :meth:`delete_types` but does not use the :attr:`params`</span>
<span class="sd">    dictionary</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        The string of the returns like section</span>
<span class="sd">    types: list of str</span>
<span class="sd">        The type identifiers to delete</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The modified string `s` without the descriptions of `types`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">patt</span> <span class="o">=</span> <span class="s1">&#39;(?s)&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;(?&lt;=\n)&#39;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\n.+?\n(?=\S+|$)&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">types</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">patt</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">delete_kwargs</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Delete the ``*args`` or ``**kwargs`` part from the parameters section.</span>

<span class="sd">    Either `args` or `kwargs` must not be None.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        The string to delete the args and kwargs from</span>
<span class="sd">    args: None or str</span>
<span class="sd">        The string for the args to delete</span>
<span class="sd">    kwargs: None or str</span>
<span class="sd">        The string for the kwargs to delete</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The type name of `args` in `s` has to be like ````*&lt;args&gt;```` (i.e. the</span>
<span class="sd">    `args` argument preceeded by a ``&#39;*&#39;`` and enclosed by double ``&#39;`&#39;``).</span>
<span class="sd">    Similarily, the type name of `kwargs` in `s` has to be like</span>
<span class="sd">    ````**&lt;kwargs&gt;````</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="n">types</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;`?`?\*</span><span class="si">%s</span><span class="s1">`?`?&#39;</span> <span class="o">%</span> <span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;`?`?\*\*</span><span class="si">%s</span><span class="s1">`?`?&#39;</span> <span class="o">%</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">delete_types</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">keep_params</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Keep the given parameters from a string.</span>

<span class="sd">    Same as :meth:`keep_params` but does not use the :attr:`params`</span>
<span class="sd">    dictionary</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        The string of the parameters like section</span>
<span class="sd">    params: list of str</span>
<span class="sd">        The parameter names to keep</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The modified string `s` with only the descriptions of `params`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">patt</span> <span class="o">=</span> <span class="s1">&#39;(?s)&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;(?&lt;=\n)&#39;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\s*:.+?\n(?=\S+|$)&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">patt</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">keep_types</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Keep the given types from a string.</span>

<span class="sd">    Same as :meth:`keep_types` but does not use the :attr:`params`</span>
<span class="sd">    dictionary</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    s: str</span>
<span class="sd">        The string of the returns like section</span>
<span class="sd">    types: list of str</span>
<span class="sd">        The type identifiers to keep</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The modified string `s` with only the descriptions of `types`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">patt</span> <span class="o">=</span> <span class="s1">&#39;(?s)&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;(?&lt;=\n)&#39;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;\n.+?\n(?=\S+|$)&#39;</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">types</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">patt</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>


<span class="c1"># assign delete_params a new name for the deprecation of the corresponding</span>
<span class="c1"># DocstringProcessor method</span>
<span class="n">_delete_params_s</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">delete_params</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>
<span class="n">_delete_types_s</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">types</span><span class="p">:</span> <span class="n">delete_types</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">)</span>
<span class="n">_delete_kwargs_s</span> <span class="o">=</span> <span class="n">delete_kwargs</span>
<span class="n">_keep_params_s</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">keep_params</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>
<span class="n">_keep_types_s</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">types</span><span class="p">:</span> <span class="n">keep_types</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DocstringProcessor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class that is intended to process docstrings.</span>

<span class="sd">    It is, but only to minor extends, inspired by the</span>
<span class="sd">    :class:`matplotlib.docstring.Substitution` class.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Create docstring processor via::</span>

<span class="sd">        &gt;&gt;&gt; from docrep import DocstringProcessor</span>
<span class="sd">        &gt;&gt;&gt; d = DocstringProcessor(doc_key=&#39;My doc string&#39;)</span>

<span class="sd">    And then use it as a decorator to process the docstring::</span>

<span class="sd">        &gt;&gt;&gt; @d</span>
<span class="sd">        ... def doc_test():</span>
<span class="sd">        ...     &#39;&#39;&#39;That&#39;s %(doc_key)s&#39;&#39;&#39;</span>
<span class="sd">        ...     pass</span>

<span class="sd">        &gt;&gt;&gt; print(doc_test.__doc__)</span>
<span class="sd">        That&#39;s My doc string</span>

<span class="sd">    Use the :meth:`get_sections` method to extract Parameter sections (or</span>
<span class="sd">    others) form the docstring for later usage (and make sure, that the</span>
<span class="sd">    docstring is dedented)::</span>

<span class="sd">        &gt;&gt;&gt; @d.get_sections(base=&#39;docstring_example&#39;,</span>
<span class="sd">        ...                 sections=[&#39;Parameters&#39;, &#39;Examples&#39;])</span>
<span class="sd">        ... @d.dedent</span>
<span class="sd">        ... def doc_test(a=1, b=2):</span>
<span class="sd">        ...     &#39;&#39;&#39;</span>
<span class="sd">        ...     That&#39;s %(doc_key)s</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Parameters</span>
<span class="sd">        ...     ----------</span>
<span class="sd">        ...     a: int, optional</span>
<span class="sd">        ...         A dummy parameter description</span>
<span class="sd">        ...     b: int, optional</span>
<span class="sd">        ...         A second dummy parameter</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Examples</span>
<span class="sd">        ...     --------</span>
<span class="sd">        ...     Some dummy example doc&#39;&#39;&#39;</span>
<span class="sd">        ...     print(a)</span>

<span class="sd">        &gt;&gt;&gt; @d.dedent</span>
<span class="sd">        ... def second_test(a=1, b=2):</span>
<span class="sd">        ...     &#39;&#39;&#39;</span>
<span class="sd">        ...     My second function where I want to use the docstring from</span>
<span class="sd">        ...     above</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Parameters</span>
<span class="sd">        ...     ----------</span>
<span class="sd">        ...     %(docstring_example.parameters)s</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Examples</span>
<span class="sd">        ...     --------</span>
<span class="sd">        ...     %(docstring_example.examples)s&#39;&#39;&#39;</span>
<span class="sd">        ...     pass</span>

<span class="sd">        &gt;&gt;&gt; print(second_test.__doc__)</span>
<span class="sd">        My second function where I want to use the docstring from</span>
<span class="sd">        above</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        a: int, optional</span>
<span class="sd">            A dummy parameter description</span>
<span class="sd">        b: int, optional</span>
<span class="sd">            A second dummy parameter</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        Some dummy example doc</span>

<span class="sd">    Another example uses non-dedented docstrings::</span>

<span class="sd">        &gt;&gt;&gt; @d.get_sections(base=&#39;not_dedented&#39;)</span>
<span class="sd">        ... def doc_test2(a=1):</span>
<span class="sd">        ...     &#39;&#39;&#39;That&#39;s the summary</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Parameters</span>
<span class="sd">        ...     ----------</span>
<span class="sd">        ...     a: int, optional</span>
<span class="sd">        ...         A dummy parameter description&#39;&#39;&#39;</span>
<span class="sd">        ...     print(a)</span>

<span class="sd">    These sections must then be used with the :meth:`with_indent` method to</span>
<span class="sd">    indent the inserted parameters::</span>

<span class="sd">        &gt;&gt;&gt; @d.with_indent(4)</span>
<span class="sd">        ... def second_test2(a=1):</span>
<span class="sd">        ...     &#39;&#39;&#39;</span>
<span class="sd">        ...     My second function where I want to use the docstring from</span>
<span class="sd">        ...     above</span>
<span class="sd">        ...</span>
<span class="sd">        ...     Parameters</span>
<span class="sd">        ...     ----------</span>
<span class="sd">        ...     %(not_dedented.parameters)s&#39;&#39;&#39;</span>
<span class="sd">        ...     pass</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#: :class:`dict`. Dictionary containing the compiled patterns to identify</span>
    <span class="c1">#: the Parameters, Other Parameters, Warnings and Notes sections in a</span>
    <span class="c1">#: docstring</span>
    <span class="n">patterns</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1">#: :class:`dict`. Dictionary containing the parameters that are used in for</span>
    <span class="c1">#: substitution.</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1">#: sections that behave the same as the `Parameter` section by defining a</span>
    <span class="c1">#: list</span>
    <span class="n">param_like_sections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;Other Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;Returns&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;Raises&#39;</span><span class="p">]</span>
    <span class="c1">#: sections that include (possibly not list-like) text</span>
    <span class="n">text_sections</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Warnings&#39;</span><span class="p">,</span> <span class="s1">&#39;Notes&#39;</span><span class="p">,</span> <span class="s1">&#39;Examples&#39;</span><span class="p">,</span> <span class="s1">&#39;See Also&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;References&#39;</span><span class="p">]</span>

    <span class="c1">#: The action on how to react on classes in python 2</span>
    <span class="c1">#:</span>
    <span class="c1">#: When calling::</span>
    <span class="c1">#:</span>
    <span class="c1">#:     &gt;&gt;&gt; @docstrings</span>
    <span class="c1">#:     ... class NewClass(object):</span>
    <span class="c1">#:     ...     &quot;&quot;&quot;%(replacement)s&quot;&quot;&quot;</span>
    <span class="c1">#:</span>
    <span class="c1">#: This normaly raises an AttributeError, because the ``__doc__`` attribute</span>
    <span class="c1">#: of a class in python 2 is not writable. This attribute may be one of</span>
    <span class="c1">#: ``&#39;ignore&#39;, &#39;raise&#39; or &#39;warn&#39;``</span>
    <span class="n">python2_classes</span> <span class="o">=</span> <span class="s1">&#39;ignore&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ``*args``</span>
<span class="sd">            Positional parameters that shall be used for the substitution. Note</span>
<span class="sd">            that you can only provide either ``*args`` or ``**kwargs``,</span>
<span class="sd">            furthermore most of the methods like `get_sections` require</span>
<span class="sd">            ``**kwargs`` to be provided (if any).</span>
<span class="sd">        ``**kwargs``</span>
<span class="sd">            Initial parameters to use</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Only positional or keyword args are allowed&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_sections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_like_sections</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_sections</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_like_sections</span><span class="p">:</span>
            <span class="n">patterns</span><span class="p">[</span><span class="n">section</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="sa">r</span><span class="s1">&#39;(?s)(?&lt;=</span><span class="si">%s</span><span class="s1">\n</span><span class="si">%s</span><span class="s1">\n)(.+?)(?=\n\n\S+|$)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">section</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">section</span><span class="p">)))</span>
        <span class="n">all_sections_patt</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">all_sections</span><span class="p">)</span>
        <span class="c1"># examples and see also</span>
        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">text_sections</span><span class="p">:</span>
            <span class="n">patterns</span><span class="p">[</span><span class="n">section</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                <span class="s1">&#39;(?s)(?&lt;=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s1">)(.+?)(?=</span><span class="si">%s</span><span class="s1">|$)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">section</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">section</span><span class="p">),</span> <span class="n">all_sections_patt</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extended_summary_patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="s1">&#39;(?s)(.+?)(?=</span><span class="si">%s</span><span class="s1">|$)&#39;</span> <span class="o">%</span> <span class="n">all_sections_patt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_all_sections_patt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">all_sections_patt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span> <span class="o">=</span> <span class="n">patterns</span>

    <span class="nd">@updates_docstring</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Substitute in a docstring of a function with :attr:`params`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        func: function</span>
<span class="sd">            function with the documentation whose sections</span>
<span class="sd">            shall be inserted from the :attr:`params` attribute</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        dedent: also dedents the doc</span>
<span class="sd">        with_indent: also indents the doc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="nd">@reads_docstring</span>
    <span class="k">def</span> <span class="nf">get_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">sections</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Parameters&#39;</span><span class="p">,</span> <span class="s1">&#39;Other Parameters&#39;</span><span class="p">]):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Exctract sections out of a docstring.</span>

<span class="sd">        This method extracts the specified `sections` out of the given string</span>
<span class="sd">        if (and only if) the docstring follows the numpy documentation</span>
<span class="sd">        guidelines [1]_. Note that the section either must appear in the</span>
<span class="sd">        :attr:`param_like_sections` or the :attr:`text_sections` attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            Docstring to split</span>
<span class="sd">        base: str</span>
<span class="sd">            base to use in the :attr:`sections` attribute</span>
<span class="sd">        sections: list of str</span>
<span class="sd">            sections to look for. Each section must be followed by a newline</span>
<span class="sd">            character (&#39;\n&#39;) and a bar of &#39;-&#39; (following the numpy (napoleon)</span>
<span class="sd">            docstring conventions).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            A mapping from section identifier to section string</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        .. [1] https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        delete_params, keep_params, delete_types, keep_types, delete_kwargs:</span>
<span class="sd">            For manipulating the docstring sections</span>
<span class="sd">        save_docstring:</span>
<span class="sd">            for saving an entire docstring</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span>
        <span class="c1"># Remove the summary and dedent the rest</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_summary</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">sections</span><span class="p">:</span>
            <span class="n">ret</span><span class="p">[</span><span class="n">section</span><span class="p">]</span> <span class="o">=</span> <span class="n">section_doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_section</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">base</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">section</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">))</span>
                <span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">section_doc</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_remove_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="c1"># if the string does not start with one of the sections, we remove the</span>
        <span class="c1"># summary</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_sections_patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()):</span>
            <span class="c1"># remove the summary</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">summary_patt</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
            <span class="c1"># look for the first line with content</span>
            <span class="n">first</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1"># dedent the lines</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">first</span><span class="p">:]))</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_get_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">[</span><span class="n">section</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@updates_docstring</span>
    <span class="k">def</span> <span class="nf">dedent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dedent a string and substitute with the :attr:`params` attribute.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            string to dedent and insert the sections of the :attr:`params`</span>
<span class="sd">            attribute</span>
<span class="sd">        stacklevel: int</span>
<span class="sd">            The stacklevel for the warning raised in :func:`safe_module` when</span>
<span class="sd">            encountering an invalid key in the string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>

    <span class="nd">@updates_docstring</span>
    <span class="k">def</span> <span class="nf">with_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Substitute a string with the indented :attr:`params`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            The string in which to substitute</span>
<span class="sd">        indent: int</span>
<span class="sd">            The number of spaces that the substitution should be indented</span>
<span class="sd">        stacklevel: int</span>
<span class="sd">            The stacklevel for the warning raised in :func:`safe_module` when</span>
<span class="sd">            encountering an invalid key in the string</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The substituted string</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        with_indent, dedent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># we make a new dictionary with objects that indent the original</span>
        <span class="c1"># strings if necessary. Note that the first line is not indented</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">_StrWithIndentation</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
             <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">safe_modulo</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_key</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a parameter from a parameter documentation.</span>

<span class="sd">        This method deletes the given `param` from the `base_key` item in the</span>
<span class="sd">        :attr:`params` dictionary and creates a new item with the original</span>
<span class="sd">        documentation without the description of the param. This method works</span>
<span class="sd">        for the ``&#39;Parameters&#39;`` sections.</span>

<span class="sd">        The new docstring without the selected parts will be accessible as</span>
<span class="sd">        ``base_key + &#39;.no_&#39; + &#39;|&#39;.join(params)``, e.g.</span>
<span class="sd">        ``&#39;original_key.no_param1|param2&#39;``.</span>

<span class="sd">        See the :meth:`keep_params` method for an example.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        base_key: str</span>
<span class="sd">            key in the :attr:`params` dictionary</span>
<span class="sd">        ``*params``</span>
<span class="sd">            str. Parameter identifier of which the documentations shall be</span>
<span class="sd">            deleted</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        delete_types, keep_params</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span>
            <span class="n">base_key</span> <span class="o">+</span> <span class="s1">&#39;.no_&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">params</span><span class="p">)]</span> <span class="o">=</span> <span class="n">delete_params</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span><span class="p">],</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_key</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the ``*args`` or ``**kwargs`` part from the parameters section.</span>

<span class="sd">        Either `args` or `kwargs` must not be None. The resulting key will be</span>
<span class="sd">        stored in</span>

<span class="sd">        ``base_key + &#39;no_args&#39;``</span>
<span class="sd">            if `args` is not None and `kwargs` is None</span>
<span class="sd">        ``base_key + &#39;no_kwargs&#39;``</span>
<span class="sd">            if `args` is None and `kwargs` is not None</span>
<span class="sd">        ``base_key + &#39;no_args_kwargs&#39;``</span>
<span class="sd">            if `args` is not None and `kwargs` is not None</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        base_key: str</span>
<span class="sd">            The key in the :attr:`params` attribute to use</span>
<span class="sd">        args: None or str</span>
<span class="sd">            The string for the args to delete</span>
<span class="sd">        kwargs: None or str</span>
<span class="sd">            The string for the kwargs to delete</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The type name of `args` in the base has to be like ````*&lt;args&gt;````</span>
<span class="sd">        (i.e. the `args` argument preceeded by a ``&#39;*&#39;`` and enclosed by double</span>
<span class="sd">        ``&#39;`&#39;``). Similarily, the type name of `kwargs` in `s` has to be like</span>
<span class="sd">        ````**&lt;kwargs&gt;````</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Neither args nor kwargs are given. I do nothing for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">base_key</span><span class="p">))</span>
            <span class="k">return</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;.no&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;_args&#39;</span> <span class="k">if</span> <span class="n">args</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;_kwargs&#39;</span> <span class="k">if</span> <span class="n">kwargs</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">delete_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span><span class="p">],</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span> <span class="o">+</span> <span class="n">ext</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">delete_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_key</span><span class="p">,</span> <span class="n">out_key</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a parameter from a parameter documentation.</span>

<span class="sd">        This method deletes the given `param` from the `base_key` item in the</span>
<span class="sd">        :attr:`params` dictionary and creates a new item with the original</span>
<span class="sd">        documentation without the description of the param. This method works</span>
<span class="sd">        for ``&#39;Results&#39;`` like sections.</span>


<span class="sd">        See the :meth:`keep_types` method for an example.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        base_key: str</span>
<span class="sd">            key in the :attr:`params` dictionary</span>
<span class="sd">        out_key: str</span>
<span class="sd">            Extension for the base key (the final key will be like</span>
<span class="sd">            ``&#39;%s.%s&#39; % (base_key, out_key)``</span>
<span class="sd">        ``*types``</span>
<span class="sd">            str. The type identifier of which the documentations shall deleted</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        delete_params</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base_key</span><span class="p">,</span> <span class="n">out_key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">delete_types</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span><span class="p">],</span> <span class="o">*</span><span class="n">types</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">keep_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_key</span><span class="p">,</span> <span class="o">*</span><span class="n">params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Keep only specific parameters from a parameter documentation.</span>

<span class="sd">        This method extracts the given `param` from the `base_key` item in the</span>
<span class="sd">        :attr:`params` dictionary and creates a new item with the original</span>
<span class="sd">        documentation with only the description of the param. This method works</span>
<span class="sd">        for ``&#39;Parameters&#39;`` like sections.</span>

<span class="sd">        The new docstring with the selected parts will be accessible as</span>
<span class="sd">        ``base_key + &#39;.&#39; + &#39;|&#39;.join(params)``, e.g.</span>
<span class="sd">        ``&#39;original_key.param1|param2&#39;``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        base_key: str</span>
<span class="sd">            key in the :attr:`params` dictionary</span>
<span class="sd">        ``*params``</span>
<span class="sd">            str. Parameter identifier of which the documentations shall be</span>
<span class="sd">            in the new section</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        keep_types, delete_params</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        To extract just two parameters from a function and reuse their</span>
<span class="sd">        docstrings, you can type::</span>

<span class="sd">            &gt;&gt;&gt; from docrep import DocstringProcessor</span>
<span class="sd">            &gt;&gt;&gt; d = DocstringProcessor()</span>
<span class="sd">            &gt;&gt;&gt; @d.get_sections(base=&#39;do_something&#39;)</span>
<span class="sd">            ... def do_something(a=1, b=2, c=3):</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     That&#39;s %(doc_key)s</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Parameters</span>
<span class="sd">            ...     ----------</span>
<span class="sd">            ...     a: int, optional</span>
<span class="sd">            ...         A dummy parameter description</span>
<span class="sd">            ...     b: int, optional</span>
<span class="sd">            ...         A second dummy parameter that will be excluded</span>
<span class="sd">            ...     c: float, optional</span>
<span class="sd">            ...         A third parameter&#39;&#39;&#39;</span>
<span class="sd">            ...     print(a)</span>

<span class="sd">            &gt;&gt;&gt; d.keep_params(&#39;do_something.parameters&#39;, &#39;a&#39;, &#39;c&#39;)</span>

<span class="sd">            &gt;&gt;&gt; @d.dedent</span>
<span class="sd">            ... def do_less(a=1, c=4):</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     My second function with only `a` and `c`</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Parameters</span>
<span class="sd">            ...     ----------</span>
<span class="sd">            ...     %(do_something.parameters.a|c)s&#39;&#39;&#39;</span>
<span class="sd">            ...     pass</span>

<span class="sd">            &gt;&gt;&gt; print(do_less.__doc__)</span>
<span class="sd">            My second function with only `a` and `c`</span>
<span class="sd">            &lt;BLANKLINE&gt;</span>
<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            a: int, optional</span>
<span class="sd">                A dummy parameter description</span>
<span class="sd">            c: float, optional</span>
<span class="sd">                A third parameter</span>

<span class="sd">        Equivalently, you can use the :meth:`delete_params` method to remove</span>
<span class="sd">        parameters::</span>

<span class="sd">            &gt;&gt;&gt; d.delete_params(&#39;do_something.parameters&#39;, &#39;b&#39;)</span>

<span class="sd">            &gt;&gt;&gt; @d.dedent</span>
<span class="sd">            ... def do_less(a=1, c=4):</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     My second function with only `a` and `c`</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Parameters</span>
<span class="sd">            ...     ----------</span>
<span class="sd">            ...     %(do_something.parameters.no_b)s&#39;&#39;&#39;</span>
<span class="sd">            ...     pass</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">params</span><span class="p">)]</span> <span class="o">=</span> <span class="n">keep_params</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span><span class="p">],</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">keep_types</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_key</span><span class="p">,</span> <span class="n">out_key</span><span class="p">,</span> <span class="o">*</span><span class="n">types</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Keep only specific parameters from a parameter documentation.</span>

<span class="sd">        This method extracts the given `type` from the `base_key` item in the</span>
<span class="sd">        :attr:`params` dictionary and creates a new item with the original</span>
<span class="sd">        documentation with only the description of the type. This method works</span>
<span class="sd">        for the ``&#39;Results&#39;`` sections.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        base_key: str</span>
<span class="sd">            key in the :attr:`params` dictionary</span>
<span class="sd">        out_key: str</span>
<span class="sd">            Extension for the base key (the final key will be like</span>
<span class="sd">            ``&#39;%s.%s&#39; % (base_key, out_key)``</span>
<span class="sd">        ``*types``</span>
<span class="sd">            str. The type identifier of which the documentations shall be</span>
<span class="sd">            in the new section</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        delete_types, keep_params</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        To extract just two return arguments from a function and reuse their</span>
<span class="sd">        docstrings, you can type::</span>

<span class="sd">            &gt;&gt;&gt; from docrep import DocstringProcessor</span>
<span class="sd">            &gt;&gt;&gt; d = DocstringProcessor()</span>
<span class="sd">            &gt;&gt;&gt; @d.get_sections(base=&#39;do_something&#39;, sections=[&#39;Returns&#39;])</span>
<span class="sd">            ... def do_something():</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     That&#39;s %(doc_key)s</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Returns</span>
<span class="sd">            ...     -------</span>
<span class="sd">            ...     float</span>
<span class="sd">            ...         A random number</span>
<span class="sd">            ...     int</span>
<span class="sd">            ...         A random integer&#39;&#39;&#39;</span>
<span class="sd">            ...     return 1.0, 4</span>

<span class="sd">            &gt;&gt;&gt; d.keep_types(&#39;do_something.returns&#39;, &#39;int_only&#39;, &#39;int&#39;)</span>

<span class="sd">            &gt;&gt;&gt; @d.dedent</span>
<span class="sd">            ... def do_less():</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     My second function that only returns an integer</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Returns</span>
<span class="sd">            ...     -------</span>
<span class="sd">            ...     %(do_something.returns.int_only)s&#39;&#39;&#39;</span>
<span class="sd">            ...     return do_something()[1]</span>

<span class="sd">            &gt;&gt;&gt; print(do_less.__doc__)</span>
<span class="sd">            My second function that only returns an integer</span>
<span class="sd">            &lt;BLANKLINE&gt;</span>
<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            int</span>
<span class="sd">                A random integer</span>

<span class="sd">        Equivalently, you can use the :meth:`delete_types` method to remove</span>
<span class="sd">        parameters::</span>

<span class="sd">            &gt;&gt;&gt; d.delete_types(&#39;do_something.returns&#39;, &#39;no_float&#39;, &#39;float&#39;)</span>

<span class="sd">            &gt;&gt;&gt; @d.dedent</span>
<span class="sd">            ... def do_less():</span>
<span class="sd">            ...     &#39;&#39;&#39;</span>
<span class="sd">            ...     My second function with only `a` and `c`</span>
<span class="sd">            ...</span>
<span class="sd">            ...     Returns</span>
<span class="sd">            ...     ----------</span>
<span class="sd">            ...     %(do_something.returns.no_float)s&#39;&#39;&#39;</span>
<span class="sd">            ...     return do_something()[1]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base_key</span><span class="p">,</span> <span class="n">out_key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">keep_types</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base_key</span><span class="p">],</span> <span class="o">*</span><span class="n">types</span><span class="p">)</span>

    <span class="nd">@reads_docstring</span>
    <span class="k">def</span> <span class="nf">get_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a docstring of a function.</span>

<span class="sd">        Like the :meth:`get_sections` method this method serves as a</span>
<span class="sd">        descriptor for functions but saves the entire docstring.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="nd">@reads_docstring</span>
    <span class="k">def</span> <span class="nf">get_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the summary of the given docstring.</span>

<span class="sd">        This method extracts the summary from the given docstring `s` which is</span>
<span class="sd">        basicly the part until two newlines appear</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            The docstring to use</span>
<span class="sd">        base: str or None</span>
<span class="sd">            A key under which the summary shall be stored in the :attr:`params`</span>
<span class="sd">            attribute. If not None, the summary will be stored in</span>
<span class="sd">            ``base + &#39;.summary&#39;``. Otherwise, it will not be stored at all</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The extracted summary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="n">summary_patt</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base</span> <span class="o">+</span> <span class="s1">&#39;.summary&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span>
        <span class="k">return</span> <span class="n">summary</span>

    <span class="nd">@reads_docstring</span>
    <span class="k">def</span> <span class="nf">get_extended_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the extended summary from a docstring.</span>

<span class="sd">        This here is the extended summary</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            The docstring to use</span>
<span class="sd">        base: str or None</span>
<span class="sd">            A key under which the summary shall be stored in the :attr:`params`</span>
<span class="sd">            attribute. If not None, the summary will be stored in</span>
<span class="sd">            ``base + &#39;.summary_ext&#39;``. Otherwise, it will not be stored at</span>
<span class="sd">            all</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The extracted extended summary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Remove the summary and dedent</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_summary</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_sections_patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extended_summary_patt</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">m</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base</span> <span class="o">+</span> <span class="s1">&#39;.summary_ext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="nd">@reads_docstring</span>
    <span class="k">def</span> <span class="nf">get_full_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the full description from a docstring.</span>

<span class="sd">        This here and the line above is the full description (i.e. the</span>
<span class="sd">        combination of the :meth:`get_summary` and the</span>
<span class="sd">        :meth:`get_extended_summary`) output</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s: str</span>
<span class="sd">            The docstring to use</span>
<span class="sd">        base: str or None</span>
<span class="sd">            A key under which the description shall be stored in the</span>
<span class="sd">            :attr:`params` attribute. If not None, the summary will be stored</span>
<span class="sd">            in ``base + &#39;.full_desc&#39;``. Otherwise, it will not be stored</span>
<span class="sd">            at all</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The extracted full description</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_summary</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">extended_summary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_extended_summary</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="n">summary</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">extended_summary</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">base</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">base</span> <span class="o">+</span> <span class="s1">&#39;.full_desc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="c1"># ------------------ DEPRECATED METHODS -----------------------------------</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;dedent&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">dedents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;get_sections&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_sectionsf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sections</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;with_indent&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">with_indents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span><span class="n">_delete_params_s</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;docrep.delete_params&#39;</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_params_s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span><span class="n">_delete_types_s</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;docrep.delete_types&#39;</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_types_s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span><span class="n">_delete_kwargs_s</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;docrep.delete_kwargs&#39;</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_kwargs_s</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span><span class="n">_keep_params_s</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;docrep.keep_params&#39;</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">keep_params_s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@deprecated</span><span class="p">(</span><span class="n">_keep_types_s</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;docrep.keep_types&#39;</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">keep_types_s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;get_docstring&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">save_docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_docstring</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;get_summary&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_summaryf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_summary</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;get_full_description&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_full_descriptionf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_full_description</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@deprecated</span><span class="p">(</span><span class="s1">&#39;get_extended_summary&#39;</span><span class="p">,</span> <span class="s2">&quot;0.3.0&quot;</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_extended_summaryf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_extended_summary</span><span class="p">(</span><span class="n">base</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="nd">@deprecated</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">cleandoc</span><span class="p">,</span> <span class="s2">&quot;0.2.6&quot;</span><span class="p">,</span> <span class="n">replacement_name</span><span class="o">=</span><span class="s1">&#39;inspect.cleandoc&#39;</span><span class="p">,</span>
            <span class="n">removed_in</span><span class="o">=</span><span class="s2">&quot;0.4.0&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dedents</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, PMEAL.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>